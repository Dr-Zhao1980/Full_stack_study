-- =====================================================================
-- 1. 用户表：存储系统用户的基础信息
-- =====================================================================
CREATE TABLE IF NOT EXISTS users (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, -- 主键，自增ID
    username VARCHAR(50) NOT NULL UNIQUE,                   -- 用户名，唯一且必填
    password VARCHAR(255) NOT NULL,                         -- 密码（加密后存储），必填
    nickname VARCHAR(50),                                   -- 昵称，可选
    email VARCHAR(100),                                     -- 邮箱，可选
    role VARCHAR(20) DEFAULT 'USER',                        -- 角色，默认普通用户 USER
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP          -- 创建时间，默认为当前时间
);

-- =====================================================================
-- 2. 贪吃蛇分数表：记录用户玩贪吃蛇游戏的成绩
-- =====================================================================
CREATE TABLE IF NOT EXISTS snake_scores (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, -- 主键，自增ID
    username VARCHAR(50) NOT NULL,                          -- 对应 users 表中的 username，标识是谁玩的
    score INT NOT NULL,                                     -- 得分，必填
    duration_seconds INT,                                   -- 存活时长（秒），可选
    played_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP           -- 游玩时间，默认为当前时间
    -- 如需严格外键约束，可改为：
    -- , CONSTRAINT fk_snake_scores_user
    --      FOREIGN KEY (username) REFERENCES users (username)
);

-- =====================================================================
-- 3. 博客文章表：存储用户发布的博客内容
-- =====================================================================
CREATE TABLE IF NOT EXISTS blog_posts (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, -- 主键，自增ID
    title VARCHAR(200) NOT NULL,                            -- 文章标题，必填
    content CLOB NOT NULL,                                  -- 文章正文，大文本，必填
    author VARCHAR(50) NOT NULL,                            -- 作者用户名（建议对应 users.username）
    summary VARCHAR(500),                                   -- 摘要/简介，可选
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,         -- 创建时间，默认为当前时间
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP          -- 最近更新时间，默认为当前时间
    -- 如需外键关联作者，可改为：
    -- , CONSTRAINT fk_blog_posts_author
    --      FOREIGN KEY (author) REFERENCES users (username)
);